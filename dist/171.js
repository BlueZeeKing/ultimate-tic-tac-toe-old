(self.webpackChunkultimate_tic_tac_toe=self.webpackChunkultimate_tic_tac_toe||[]).push([[171],{7171:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>S});var s=a(7294),r=(a(5410),a(2419));function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function u(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,s=f(t);if(e){var r=f(this).constructor;a=Reflect.construct(s,arguments,r)}else a=s.apply(this,arguments);return d(this,a)}}function d(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){l(a,t);var e=h(a);function a(t){var s;return n(this,a),(s=e.call(this,t)).state={board:[["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""],["","","","","","","","",""]],boardStatus:["","","","","","","","",""],active:10,currentTurn:"X",msg:"It's X's Turn"},s}return u(a,[{key:"componentDidMount",value:function(){console.log("mounted"),this.doneHandler=this.doneHandlerUnbound.bind(this),this.props.socket.on("update",function(t){var e=JSON.parse(t);this.setState(e)}.bind(this)),this.setState({})}},{key:"isFull",value:function(){return 9===this.state.boardStatus.filter((function(t){return"f"===t})).length}},{key:"hasWon",value:function(){return this.state.boardStatus[0]===this.state.boardStatus[1]&&this.state.boardStatus[0]===this.state.boardStatus[2]?this.state.boardStatus[0]:this.state.boardStatus[3]===this.state.boardStatus[4]&&this.state.boardStatus[3]===this.state.boardStatus[5]?this.state.boardStatus[3]:this.state.boardStatus[6]===this.state.boardStatus[7]&&this.state.boardStatus[6]===this.state.boardStatus[8]?this.state.boardStatus[6]:this.state.boardStatus[0]===this.state.boardStatus[3]&&this.state.boardStatus[0]===this.state.boardStatus[6]?this.state.boardStatus[0]:this.state.boardStatus[1]===this.state.boardStatus[4]&&this.state.boardStatus[1]===this.state.boardStatus[7]?this.state.boardStatus[1]:this.state.boardStatus[2]===this.state.boardStatus[5]&&this.state.boardStatus[2]===this.state.boardStatus[8]?this.state.boardStatus[2]:this.state.boardStatus[0]===this.state.boardStatus[4]&&this.state.boardStatus[0]===this.state.boardStatus[8]?this.state.boardStatus[0]:this.state.boardStatus[2]===this.state.boardStatus[4]&&this.state.boardStatus[2]===this.state.boardStatus[6]?this.state.boardStatus[2]:"f"}},{key:"doneHandlerUnbound",value:function(t,e,a,s,r){var o=this.state;o.board[t]=r,!1===s&&""!==a?o.boardStatus[t]=a:!1===s&&(o.boardStatus[t]="f"),"X"===o.currentTurn?o.currentTurn="O":o.currentTurn="X",o.msg="It's ".concat(o.currentTurn,"'s Turn"),o.active=e,""!==o.boardStatus[e]&&(o.active=10),""!==this.hasWon(o)&&"f"!==this.hasWon(o)?(o.active=9,o.msg="The winner is ".concat(this.hasWon(o))):this.isFull(o)&&(o.active=9,o.msg="Tie Game"),this.setState(o),this.props.socket.emit("update",JSON.stringify(this.state))}},{key:"render",value:function(){var t=this,e=[];return this.state.board.forEach((function(a,r){e.push(s.createElement(m,{key:r,index:r,active:(t.state.active===r||10===t.state.active)&&t.state.currentTurn===t.props.user&&""===t.state.boardStatus[r],currentTurn:t.state.currentTurn,doneHandler:t.doneHandler,board:a}))})),s.createElement("div",{className:"w-full h-full border-2 border-gray-800 flex flex-row flex-wrap"},e,s.createElement("h3",{className:"text-2xl text-center font-bold w-full my-2"},this.state.msg))}}]),a}(s.Component),m=function(t){l(a,t);var e=h(a);function a(t){var s;return n(this,a),(s=e.call(this,t)).state={board:t.board},s.state.open=!s.isFull()&&""===s.hasWon(),s.handleClick=s.handleClick.bind(b(s)),s}return u(a,[{key:"componentDidUpdate",value:function(t){this.props.board!==t.board&&this.setState({board:this.props.board})}},{key:"isFull",value:function(){return 0===this.state.board.filter((function(t){return""===t})).length}},{key:"hasWon",value:function(){return""!==this.state.board[0]&&this.state.board[0]===this.state.board[1]&&this.state.board[0]===this.state.board[2]?this.state.board[0]:""!==this.state.board[3]&&this.state.board[3]===this.state.board[4]&&this.state.board[3]===this.state.board[5]?this.state.board[3]:""!==this.state.board[6]&&this.state.board[6]===this.state.board[7]&&this.state.board[6]===this.state.board[8]?this.state.board[6]:""!==this.state.board[0]&&this.state.board[0]===this.state.board[3]&&this.state.board[0]===this.state.board[6]?this.state.board[0]:""!==this.state.board[1]&&this.state.board[1]===this.state.board[4]&&this.state.board[1]===this.state.board[7]?this.state.board[1]:""!==this.state.board[2]&&this.state.board[2]===this.state.board[5]&&this.state.board[2]===this.state.board[8]?this.state.board[2]:""!==this.state.board[0]&&this.state.board[0]===this.state.board[4]&&this.state.board[0]===this.state.board[8]?this.state.board[0]:""!==this.state.board[2]&&this.state.board[2]===this.state.board[4]&&this.state.board[2]===this.state.board[6]?this.state.board[2]:""}},{key:"handleClick",value:function(t){if(this.props.active&&this.state.open&&""===this.state.board[t]){var e=this.state;e.board[t]=this.props.currentTurn,e.open=!this.isFull()&&""===this.hasWon(),this.setState(e),this.props.doneHandler(this.props.index,t,this.hasWon(),e.open,e.board)}}},{key:"render",value:function(){var t,e=this,a=[];this.state.board.forEach((function(t,r){a.push(s.createElement(v,{index:r,key:r,onClick:e.handleClick,value:t}))})),""!==this.hasWon()&&(t=s.createElement("div",{className:"w-full h-full absolute top-0 left-0 flex flex-col"},s.createElement("div",{className:"flex-grow"}),s.createElement("p",{className:"text-center cursor-default text-8xl leading-none align-middle opacity-70"},this.hasWon()),s.createElement("div",{className:"flex-grow"})));var r="w-1/3 h-1/3 border-2 border-gray-800 flex-board relative transition-all duration-200 highlight-default";return(this.isFull()||""!==this.hasWon())&&(r+=" bg-gray-300"),!0===this.props.active&&this.state.open&&(r+=" highlight"),s.createElement("div",{className:r},a,t)}}]),a}(s.Component);function v(t){return s.createElement("div",{className:"w-1/3 h-1/3 border border-gray-400 flex flex-col float-left",onClick:function(e){t.onClick(t.index)}},s.createElement("div",{className:"flex-grow"}),s.createElement("p",{className:"text-center cursor-default leading-none align-middle text-3xl"},t.value),s.createElement("div",{className:"flex-grow"}))}const S=function(t){return s.createElement("div",{className:"w-screen h-screen"},s.createElement(r.Z,null),s.createElement("div",{className:"flex flex-col text-center h-full w-full"},s.createElement("div",{className:"flex-grow"}),s.createElement("div",{className:"flex flex-row text-center w-full"},s.createElement("div",{className:"flex-grow"}),s.createElement("div",{className:"w-90 h-90"},s.createElement(p,{socket:t.socket,user:t.user})),s.createElement("div",{className:"flex-grow"})),s.createElement("div",{className:"flex-grow"})))}}}]);